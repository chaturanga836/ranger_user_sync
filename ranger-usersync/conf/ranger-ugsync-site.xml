<?xml version="1.0" encoding="UTF-8"?>
<configuration>

  <!-- Ranger Admin -->
  <!-- <property>
    <name>ranger.usersync.policymgr.urls</name>
    <value>http://ec2-65-0-150-75.ap-south-1.compute.amazonaws.com:6080</value>
  </property> -->

  <property>
    <name>ranger.usersync.policymanager.baseURL</name>
    <value>http://ec2-65-0-150-75.ap-south-1.compute.amazonaws.com:6080</value>
  </property>

  <!-- need these config for ldap sync -->
  <property>
    <name>ranger.usersync.policymgr.username</name>
    <value>rangerusersync</value>
  </property>

  <property>
    <name>ranger.usersync.policymgr.password</name>
    <value>Usersync@123</value>
  </property>

  <property>
    <name>ranger.usersync.port</name>
    <value>5151</value>
  </property>

  <property>
    <name>ranger.usersync.sync.source</name>
    <value>ldap</value>
  </property>

  <property>
    <name>ranger.usersync.sink.impl.class</name>
    <value>org.apache.ranger.unixusersync.process.PolicyMgrUserGroupBuilder</value>
  </property>

  <property>
    <name>ranger.usersync.truststore.password</name>
    <value>changeit</value>
  </property>

  <property>
    <name>ranger.usersync.truststore.file</name>
    <value>/opt/ranger-usersync/conf/cert/truststore.jks</value>
  </property>

  <property>
    <name>ranger.usersync.ldap.ssl.truststore</name>
    <value>/opt/ranger-usersync/conf/cert/truststore.jks</value>
</property>

<property>
    <name>ranger.usersync.ldap.ssl.truststore.password</name>
    <value>changeit</value>
</property>

<property>
    <name>ranger.usersync.ldap.ssl.truststore.type</name>
    <value>JKS</value>
</property>

  <!-- end need these config for ldap sync -->
  <!-- LDAP Connection -->
  <property>
    <name>ranger.usersync.ldap.url</name>
    <value>ldaps://ldap-server:636</value>
  </property>

  <property>
    <name>ranger.usersync.ldap.binddn</name>
    <value>cn=admin,dc=example,dc=com</value>
  </property>

  <property>
    <name>ranger.usersync.ldap.ldapbindpassword</name>
    <value>admin123</value>
  </property>

  <!-- LDAP Search -->
  <property>
    <name>ranger.usersync.ldap.searchBase</name>
    <value>dc=example,dc=com</value>
  </property>

  <property>
    <name>ranger.usersync.ldap.user.searchbase</name>
    <value>dc=example,dc=com</value>
  </property>

  <property>
    <name>ranger.usersync.group.searchbase</name>
    <value>ou=Groups,dc=example,dc=com</value>
  </property>

  <property>
    <name>ranger.usersync.ldap.user.groupnameattribute</name>
    <value></value>
  </property>

  <property>
    <name>ranger.usersync.enabled</name>
    <value>true</value>
  </property>

  <property>
    <name>ranger.usersync.group.searchenabled</name>
    <value>true</value>
  </property>
  <!-- Group configuration -->
  <property>
    <name>ranger.usersync.group.objectclass</name>
    <value>groupOfNames</value>
  </property>

  <property>
    <name>ranger.usersync.group.searchfilter</name>
    <value>(objectClass=groupOfNames)</value>
  </property>
  <property>
    <name>ranger.usersync.group.memberattributename</name>
    <value>member</value>
  </property>

  <property>
    <name>ranger.usersync.group.nameattribute</name>
    <value>cn</value>
  </property>

  <property>
    <name>ranger.usersync.group.user.map.sync.enabled</name>
    <value>true</value>
  </property>

  <!-- Credential keystore -->
  <property>
    <name>ranger.usersync.credstore.filename</name>
    <value>/opt/ranger-usersync/conf/rangerusersync.jceks</value>
  </property>

  <!-- <property>
    <name>ranger.usersync.credstore.password.alias</name>
    <value>rangerUsersync_password</value>
  </property> -->

  <property>
    <name>ranger.usersync.policymgr.keystore</name>
    <value>/opt/ranger-usersync/conf/rangerusersync.jceks</value>
  </property>

  <property>
    <name>ranger.usersync.policymgr.alias</name>
    <value>rangerUsersync_password</value>
  </property>

	<property>
      <name>ranger.usersync.keystore.password</name>
      <value>changeit</value>
    </property>
  <!-- Usersync directories -->
  <property>
    <name>ranger.usersync.base.dir</name>
    <value>/opt/ranger-usersync</value>
  </property>

  <property>
    <name>ranger.usersync.hadoop.conf.dir</name>
    <value>/etc/hadoop/conf</value>
  </property>

  <property>
    <name>ranger.usersync.pid.dir</name>
    <value>/opt/ranger-usersync/run</value>
  </property>

	<property>
		<name>ranger.usersync.keystore.file</name>
		<value>/opt/ranger-usersync/conf/cert/unixauthservice.jks</value>
	</property>

  <!-- Usersync behavior -->
  <property>
    <name>ranger.usersync.source.impl.class</name>
    <value>org.apache.ranger.ldapusersync.process.LdapUserGroupBuilder</value>
  </property>

  <property>
    <name>ranger.usersync.ldap.user.nameattribute</name>
    <value>uid</value>
  </property>
  <property>
    <name>ranger.usersync.ldap.user.objectclass</name>
    <value>inetOrgPerson</value>
  </property>
  <property>
    <name>ranger.usersync.ldap.user.searchfilter</name>
    <value>(uid=*)</value>
  </property>
  <property>
    <name>ranger.usersync.ldap.user.searchattributes</name>
    <value>uid,cn,memberof</value>
  </property>
  <property>
    <name>ranger.usersync.policymgr.maxthreads</name>
    <value>10</value>
  </property>

  <property>
    <name>ranger.usersync.policymgr.maxretries</name>
    <value>3</value>
  </property>

  <property>
    <name>ranger.usersync.policymgr.retryinterval</name>
    <value>1000</value>
  </property>

  <property>
    <name>ranger.usersync.sleeptimeinmillisbetweensynccycle</name>
    <value>300000</value>    <!-- 5 minutes -->
  </property>

  <property>
    <name>ranger.usersync.policymanager.maxrecordsperapicall</name>
    <value>1000</value>
  </property>

  <property>
    <name>ranger.usersync.unix.auth.enabled</name>
    <value>false</value>
  </property>

  <property>
    <name>ranger.usersync.ldap.username.caseconversion</name>
    <value>lower</value>
  </property>

  <property>
    <name>ranger.usersync.ldap.groupname.caseconversion</name>
    <value>lower</value>
  </property>
</configuration>